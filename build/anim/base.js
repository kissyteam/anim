modulex.add("anim/base",["dom","anim/base/utils","anim/base/queue","promise","util"],function(e,n,t){function i(e){var n,t=e.config.complete;m.isEmptyObject(n=e._backupProps)||o.css(e.node,n),t&&t.call(e)}function u(e,n,t,i,a){var r,s=this;e.node?r=e:(m.isPlainObject(t)?r=m.clone(t):(r={complete:a},t&&(r.duration=t),i&&(r.easing=i)),r.node=e,r.to=n),r=m.merge(p,r),u.superclass.constructor.call(s),d.Defer(s),s.config=r,e=r.node,m.isPlainObject(e)||(e=o.get(r.node)),s.node=s.el=e,s._backupProps={},s._propsData={};var c={};n=r.to;for(var f in n)c[l(f)]=n[f];r.to=c}var a,o=e("dom"),r=e("./base/utils"),s=e("./base/queue"),d=e("promise"),m=e("util"),c=o.NodeType,l=m.camelCase,f=m.noop,v={toggle:1,hide:1,show:1},p={duration:1,easing:"linear"};m.extend(u,d,{prepareFx:f,runInternal:function(){var e,n=this,t=n.config,i=n.node,u=n._backupProps,s=n._propsData,d=t.to,l=t.delay||0,f=t.duration;if(r.saveRunningAnim(n),m.each(d,function(e,n){m.isPlainObject(e)||(e={value:e}),s[n]=m.mix({delay:l,easing:t.easing,frame:t.frame,duration:f},e)}),i.nodeType===c.ELEMENT_NODE){if(d.width||d.height){var p=i.style;m.mix(u,{overflow:p.overflow,"overflow-x":p.overflowX,"overflow-y":p.overflowY}),p.overflow="hidden"}var g,_;if(m.each(s,function(t,r){if(e=t.value,v[e]){if(_===a&&(_="none"===o.css(i,"display")),"hide"===e&&_||"show"===e&&!_)return n.stop(!0),g=!1;u[r]=o.style(i,r),"toggle"===e&&(e=_?"show":"hide"),"hide"===e?(t.value=0,u.display="none"):(t.value=o.css(i,r),o.css(i,r,0),o.show(i))}return void 0}),g===!1)return}n.startTime=m.now(),m.isEmptyObject(s)?(n.__totalTime=1e3*f,n.__waitTimeout=setTimeout(function(){n.stop(!0)},n.__totalTime)):(n.prepareFx(),n.doStart())},isRunning:function(){return r.isAnimRunning(this)},isPaused:function(){return r.isAnimPaused(this)},pause:function(){var e=this;return e.isRunning()&&(e._runTime=m.now()-e.startTime,e.__totalTime-=e._runTime,r.removeRunningAnim(e),r.savePausedAnim(e),e.__waitTimeout?clearTimeout(e.__waitTimeout):e.doStop()),e},doStop:f,doStart:f,resume:function(){var e=this;return e.isPaused()&&(e.startTime=m.now()-e._runTime,r.removePausedAnim(e),r.saveRunningAnim(e),e.__waitTimeout?e.__waitTimeout=setTimeout(function(){e.stop(!0)},e.__totalTime):(e.beforeResume(),e.doStart())),e},beforeResume:f,run:function(){var e,n=this,t=n.config.queue;return t===!1?n.runInternal():(e=s.queue(n.node,t,n),1===e.length&&n.runInternal()),n},stop:function(e){var n,t=this,u=t.node,a=t.config.queue;if(t.isResolved()||t.isRejected())return t;if(t.__waitTimeout&&(clearTimeout(t.__waitTimeout),t.__waitTimeout=0),!t.isRunning()&&!t.isPaused())return a!==!1&&s.remove(u,a,t),t;t.doStop(e),r.removeRunningAnim(t),r.removePausedAnim(t);var o=t.defer;return e?(i(t),o.resolve([t])):o.reject([t]),a!==!1&&(n=s.dequeue(u,a),n&&n[0]&&n[0].runInternal()),t}});var g=u.Statics={isRunning:r.isElRunning,isPaused:r.isElPaused,stop:r.stopEl,Q:s};m.each(["pause","resume"],function(e){g[e]=function(n,t){return null===t||"string"==typeof t||t===!1?r.pauseOrResumeQueue(n,t,e):r.pauseOrResumeQueue(n,void 0,e)}}),t.exports=u}),modulex.add("anim/base/utils",["anim/base/queue","util","dom"],function(e,n,t){function i(e){var n=e.node,t=l.data(n,f);t||l.data(n,f,t={}),t[c.stamp(e)]=e}function u(e){var n=e.node,t=l.data(n,f);t&&(delete t[c.stamp(e)],c.isEmptyObject(t)&&l.removeData(n,f))}function a(e){var n=e.node,t=l.data(n,f);return t?!!t[c.stamp(e)]:0}function o(e){var n=e.node,t=l.data(n,v);t||l.data(n,v,t={}),t[c.stamp(e)]=e}function r(e){var n=e.node,t=l.data(n,v);t&&(delete t[c.stamp(e)],c.isEmptyObject(t)&&l.removeData(n,v))}function s(e){var n=e.node,t=l.data(n,v);return t?!!t[c.stamp(e)]:0}function d(e,n,t){var i=l.data(e,"resume"===t?v:f),u=c.merge(i);c.each(u,function(e){(void 0===n||e.config.queue===n)&&e[t]()})}var m=e("./queue"),c=e("util"),l=e("dom"),f=c.guid("ks-anim-unqueued-"+c.now()+"-"),v=c.guid("ks-anim-paused-"+c.now()+"-");t.exports={saveRunningAnim:i,removeRunningAnim:u,isAnimPaused:s,removePausedAnim:r,savePausedAnim:o,isAnimRunning:a,isElPaused:function(e){var n=l.data(e,v);return n&&!c.isEmptyObject(n)},isElRunning:function(e){var n=l.data(e,f);return n&&!c.isEmptyObject(n)},pauseOrResumeQueue:d,stopEl:function(e,n,t,i){t&&(void 0===i?m.clearQueues(e):i!==!1&&m.clearQueue(e,i));var u=l.data(e,f),a=c.merge(u);c.each(a,function(e){(void 0===i||e.config.queue===i)&&e.stop(n)})}}}),modulex.add("anim/base/queue",["dom","util"],function(e,n,t){function i(e,n,t){n=n||s;var i,u=a.data(e,r);return u||t||a.data(e,r,u={}),u&&(i=u[n],i||t||(i=u[n]=[])),i}var u,a=e("dom"),o=e("util"),r=o.guid("ks-queue-"+o.now()+"-"),s=o.guid("ks-queue-"+o.now()+"-");u={queueCollectionKey:r,queue:function(e,n,t){var u=i(e,n);return u.push(t),u},remove:function(e,n,t){var a,r=i(e,n,1);return r&&(a=o.indexOf(t,r),a>-1&&r.splice(a,1)),r&&!r.length&&u.clearQueue(e,n),r},clearQueues:function(e){a.removeData(e,r)},clearQueue:function(e,n){n=n||s;var t=a.data(e,r);t&&delete t[n],o.isEmptyObject(t)&&a.removeData(e,r)},dequeue:function(e,n){var t=i(e,n,1);return t&&(t.shift(),t.length||u.clearQueue(e,n)),t}},t.exports=u});