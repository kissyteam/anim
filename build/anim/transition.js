modulex.add("anim/transition",["util","dom","anim/base","feature"],function(e,n,t){function a(e){var n="";return s.each(e,function(e,t){n&&(n+=","),n+=t+" "+e.duration+"s "+e.easing+" "+e.delay+"s"}),n}function i(e){return e.replace(/[A-Z]/g,function(e){return"-"+e.toLowerCase()})}function r(e,n,t,a,i){var s=this;return s instanceof r?(r.superclass.constructor.apply(s,arguments),void 0):new r(e,n,t,a,i)}var s=e("util"),o=e("dom"),u=e("./base"),c=e("feature"),p=c.getCssVendorInfo,d=p("transition");if(d){var l=d.propertyName,f="linear",m={ease:1,linear:1,"ease-in":1,"ease-out":1,"ease-in-out":1};s.extend(r,u,{prepareFx:function(){var e,n,t=this,a=t._propsData,r={};for(var o in a)e=a[o],"string"==typeof e.easing?s.startsWith(e.easing,"cubic-bezier")||m[e.easing]||(e.easing=f):e.easing=f,n=p(o),n?r[i(n.propertyName)]=a[o]:console.error("anim: unsupported css property for transition anim: "+o);t._propsData=r},doStart:function(){var e=this,n=e.node,t=n.style,i=e._propsData,r=t[l],u=0,c={};s.each(i,function(e,t){var a=e.value;o.css(n,t,o.css(n,t)),c[t]=a,u=Math.max(e.duration+e.delay,u)}),-1!==r.indexOf("none")?r="":r&&(r+=","),t[l]=r+a(i),setTimeout(function(){o.css(n,c)},0),e._transitionEndTimer=setTimeout(function(){e.stop(!0)},1e3*u)},beforeResume:function(){var e=this,n=e._propsData,t=s.merge(n),a=e._runTime/1e3;s.each(t,function(e,t){var i=a;e.delay>=i?e.delay-=i:(i-=e.delay,e.delay=0,e.duration>=i?e.duration-=i:delete n[t])})},doStop:function(e){var n,t=this,a=t.node,i=a.style,r=t._propsData,u=[],c={};t._transitionEndTimer&&(clearTimeout(t._transitionEndTimer),t._transitionEndTimer=null),s.each(r,function(n,t){e||(c[t]=o.css(a,t)),u.push(t)}),n=s.trim(i[l].replace(new RegExp("(^|,)\\s*(?:"+u.join("|")+")\\s+[^,]+","gi"),"$1")).replace(/^,|,,|,$/g,"")||"none",i[l]=n,o.css(a,c)}}),s.mix(r,u.Statics),t.exports=r,r._name_="TransitionAnim",r.version="1.0.0"}else t.exports=null});